<?php
$config = array();

$config['admin'] = array(
        // The default is to use core:AdminPassword, but it can be replaced with
        // any authentication source.

        'core:AdminPassword',
    );

$config['default-sp'] = [
        'saml:SP',
        'entityID' => 'http://default-sp.org',
        'idp' => null,
        'discoURL' => null,
    ];

$config['example-userpass'] = [
        'exampleauth:UserPass',

        // Give the user an option to save their username for future login attempts
        // And when enabled, what should the default be, to save the username or not
        //'remember.username.enabled' => false,
        //'remember.username.checked' => false,

        'users' => [
            'student:{{testidp_student_passwd}}' => [
                'uid' => ['student'],
                'eduPersonPrincipalName' => 'student@{{testidp_hostname}}',
                'givenName' => 'Student',
                'sn' => 'One',
                'cn' => 'Student One',
                'displayName' => 'Student One',
                'mail' => 'student@{{testidp_hostname}}',
                'schacHomeOrganization' => '{{testidp_hostname}}',
                'eduPersonAffiliation' => ['member', 'student'],
                'eduPersonScopedAffiliation' => ['member@{{testidp_hostname}}', 'student@{{testidp_hostname}}'],
                'eduPersonEntitlement' => ['urn:disk:100'],
            ],
            'employee:{{testidp_employee_passwd}}' => [
                'uid' => ['employee'],
                'eduPersonPrincipalName' => 'employee@{{testidp_hostname}}',
                'givenName' => 'Employee',
                'sn' => 'One',
                'cn' => 'Employee One',
                'displayName' => 'Employee One',
                'mail' => 'employee@{{testidp_hostname}}',
                'schacHomeOrganization' => '{{testidp_hostname}}',
                'eduPersonAffiliation' => ['member', 'employee'],
                'eduPersonScopedAffiliation' => ['member@{{testidp_hostname}}', 'employee@{{testidp_hostname}}'],
                'eduPersonEntitlement' => ['urn:disk:200'],
            ],
            'orgAdmin:{{testidp_orgAdmin_passwd}}' => [
                'eduPersonPrincipalName' => 'orgAdmin@{{testidp_hostname}}',
                'givenName' => 'OrgAdmin',
                'sn' => 'One',
                'displayName' => 'OrgAdmin One',
                'mail' => 'orgAdmin@{{testidp_hostname}}',
                'eduPersonScopedAffiliation' => ['member@{{testidp_hostname}}', 'orgAdmin@{{testidp_hostname}}'],
            ],
            'orgManager:{{testidp_orgManager_passwd}}' => [
                'eduPersonPrincipalName' => 'orgManager@{{testidp_hostname}}',
                'givenName' => 'OrgManager',
                'sn' => 'One',
                'displayName' => 'OrgManager One',
                'mail' => 'orgManager@{{testidp_hostname}}',
                'eduPersonScopedAffiliation' => ['member@{{testidp_hostname}}', 'orgManager@{{testidp_hostname}}'],
            ],
            'unitManager:{{testidp_unitManager_passwd}}' => [
                'eduPersonPrincipalName' => 'unitManager@{{testidp_hostname}}',
                'givenName' => 'UnitManager',
                'sn' => 'One',
                'displayName' => 'UnitManager One',
                'mail' => 'unitManager@{{testidp_hostname}}',
                'eduPersonScopedAffiliation' => ['member@{{testidp_hostname}}', 'unitManager@{{testidp_hostname}}'],
            ],
            'serviceAdmin:{{testidp_serviceAdmin_passwd}}' => [
                'eduPersonPrincipalName' => 'serviceAdmin@{{testidp_hostname}}',
                'givenName' => 'ServiceAdmin',
                'sn' => 'One',
                'displayName' => 'ServiceAdmin One',
                'mail' => 'serviceAdmin@{{testidp_hostname}}',
                'eduPersonScopedAffiliation' => ['member@{{testidp_hostname}}', 'serviceAdmin@{{testidp_hostname}}'],
            ],
            'serviceManager:{{testidp_serviceManager_passwd}}' => [
                'eduPersonPrincipalName' => 'serviceManager@{{testidp_hostname}}',
                'givenName' => 'ServiceManager',
                'sn' => 'One',
                'displayName' => 'ServiceManager One',
                'mail' => 'serviceManager@{{testidp_hostname}}',
                'eduPersonScopedAffiliation' => ['member@{{testidp_hostname}}', 'serviceManager@{{testidp_hostname}}'],
            ],
            'coAdmin:{{testidp_coAdmin_passwd}}' => [
                'eduPersonPrincipalName' => 'coAdmin@{{testidp_hostname}}',
                'givenName' => 'CoAdmin',
                'sn' => 'One',
                'displayName' => 'CoAdmin One',
                'mail' => 'coAdmin@{{testidp_hostname}}',
                'eduPersonScopedAffiliation' => ['member@{{testidp_hostname}}', 'coAdmin@{{testidp_hostname}}'],
            ],
            'normalUser:{{testidp_normalUser_passwd}}' => [
                'eduPersonPrincipalName' => 'normalUser@{{testidp_hostname}}',
                'givenName' => 'NormalUser',
                'sn' => 'One',
                'displayName' => 'NormalUser One',
                'mail' => 'normalUser@{{testidp_hostname}}',
                'eduPersonScopedAffiliation' => ['member@{{testidp_hostname}}', 'normalUser@{{testidp_hostname}}'],
            ],
{% for user in testidp_extra_users %}
            '{{user.name}}:{{user.passwd}}' => [
                {% for attr, val in user.attributes.items() %}
                    '{{attr}}' => {% if val is string %}'{{val}}'{% else %}{{val}}{% endif %},
                {% endfor %}
            ],
{% endfor %}
        ],
    ];
